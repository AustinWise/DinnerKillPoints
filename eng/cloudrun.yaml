apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  annotations:
    run.googleapis.com/client-name: cloud-console
    run.googleapis.com/ingress: all
    run.googleapis.com/ingress-status: all
    run.googleapis.com/launch-stage: BETA
    run.googleapis.com/operation-id: ff01b866-d843-4e7a-b798-32d2fc9327ee
    serving.knative.dev/creator: austinwise@gmail.com
    serving.knative.dev/lastModifier: AustinWise@gmail.com
  creationTimestamp: '2023-07-09T19:53:12.930459Z'
  generation: 54
  labels:
    cloud.googleapis.com/location: us-central1
    commit-sha: 2937f08220f4a59facf4861ccef6c46c75a2ad29
    gcb-build-id: 0340fa3c-584f-4596-a762-f0db4aa7600c
    gcb-trigger-id: 622a5ef0-2695-4cda-90f0-901d2dbbab0d
    gcb-trigger-region: global
    managed-by: gcp-cloud-build-deploy-cloud-run
  name: dkpweb
  namespace: '216611213396'
  resourceVersion: AAYGsuHgxyU
  selfLink: /apis/serving.knative.dev/v1/namespaces/216611213396/services/dkpweb
  uid: 83053708-04d8-4a54-981f-77c2ed887ef2
spec:
  template:
    metadata:
      annotations:
        autoscaling.knative.dev/maxScale: '3'
        run.googleapis.com/client-name: cloud-console
        run.googleapis.com/cloudsql-instances: austinsql:us-central1:austinsql
        run.googleapis.com/startup-cpu-boost: 'true'
      labels:
        client.knative.dev/nonce: 95264036-ccd7-4c1b-9634-2879904d62a4
        commit-sha: 2937f08220f4a59facf4861ccef6c46c75a2ad29
        gcb-build-id: 0340fa3c-584f-4596-a762-f0db4aa7600c
        gcb-trigger-id: 622a5ef0-2695-4cda-90f0-901d2dbbab0d
        gcb-trigger-region: global
        managed-by: gcp-cloud-build-deploy-cloud-run
        run.googleapis.com/startupProbeType: Custom
    spec:
      containerConcurrency: 80
      containers:
      - env:
        - name: DataProtection__Bucket
          value: dkp-settings
        - name: DataProtection__ObjectName
          value: DataProtectionKeys.xml
        - name: GcpProjectId
          value: '216611213396'
        - name: ConnectionStrings__Postgres
          value: host=127.0.0.1; database=dkp; username=dkp-service-account@dinnerkillpoints.iam;
            password=test;
        image: us-central1-docker.pkg.dev/dinnerkillpoints/cloud-run-source-deploy/dinnerkillpoints/dkpweb:2937f08220f4a59facf4861ccef6c46c75a2ad29
        name: dkp
        ports:
        - containerPort: 8080
          name: http1
        resources:
          limits:
            cpu: 1000m
            memory: 512Mi
        startupProbe:
          failureThreshold: 5
          httpGet:
            path: /healthz
            port: 8080
          periodSeconds: 2
          timeoutSeconds: 1
      - args:
        - --structured-logs
        - --auto-iam-authn
        - --health-check
        - --http-address=0.0.0.0
        - austinsql:us-central1:austinsql
        image: us.gcr.io/cloud-sql-connectors/cloud-sql-proxy:2.7.0
        name: sql
        resources:
          limits:
            cpu: 1000m
            memory: 256Mi
        startupProbe:
          failureThreshold: 5
          httpGet:
            path: /startup
            port: 9090
          periodSeconds: 2
          timeoutSeconds: 1
      serviceAccountName: dkp-service-account@dinnerkillpoints.iam.gserviceaccount.com
      timeoutSeconds: 300
  traffic:
  - latestRevision: true
    percent: 100
status:
  address:
    url: https://dkpweb-cvempurorq-uc.a.run.app
  conditions:
  - lastTransitionTime: '2023-10-02T02:53:43.743004Z'
    status: 'True'
    type: Ready
  - lastTransitionTime: '2023-10-02T02:53:27.585048Z'
    status: 'True'
    type: ConfigurationsReady
  - lastTransitionTime: '2023-10-02T02:53:43.813925Z'
    status: 'True'
    type: RoutesReady
  latestCreatedRevisionName: dkpweb-00053-hmx
  latestReadyRevisionName: dkpweb-00053-hmx
  observedGeneration: 54
  traffic:
  - latestRevision: true
    percent: 100
    revisionName: dkpweb-00053-hmx
  url: https://dkpweb-cvempurorq-uc.a.run.app
