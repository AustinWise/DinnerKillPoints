@model Austin.DkpLib.BillSplit

@{
    ViewBag.Title = "Bill Split Details";
}

<h2>Bill Split Details</h2>

<table>
    <tr>
        <th>ID</th>
        <td>@Model.ID</td>
    </tr>
    <tr>
        <th>Name</th>
        <td>@Model.Name</td>
    </tr>
    <tr>
        <th>Total</th>
        <td>@((Model.Transactions.Sum(t => t.Amount) / 100d).ToString("c"))</td>
    </tr>
    <tr>
        <th>Transactions</th>
        <td>
            <table>
                <thead>
                    <tr>
                        <th>Debtor</th>
                        <th>Creditor</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var t in Model.Transactions)
                    {
                        <tr>
                            <td>@Html.ActionLink(t.Debtor.ToString(), "Detail", "People", new { id = t.DebtorID }, null)</td>
                            <td>@Html.ActionLink(t.Creditor.ToString(), "Detail", "People", new { id = t.CreditorID }, null)</td>
                            <td>@Html.ActionLink((t.Amount / 100d).ToString("c"), "View", "Transaction", new { id = t.ID }, null)</td>
                        </tr>
                    }
                </tbody>
            </table>
        </td>
    </tr>
</table>

@if (Roles.IsUserInRole("Admin"))
{
    using (Html.BeginForm("Delete", "BillSplit", new { id = @Model.ID }, FormMethod.Post))
    {
    <input id="submit" type="submit" value="Delete" />
    }
}